<!DOCTYPE html><html lang="en-US"><head><link rel="preload" href="/_next/ce5d4a60-9e10-480d-82bb-ce009bc3d0c1/page/post/index.js" as="script"/><link rel="preload" href="/_next/ce5d4a60-9e10-480d-82bb-ce009bc3d0c1/page/_error/index.js" as="script"/><link rel="preload" href="/_next/f26e4a744a3bf392118da3c0b731b76c/app.js" as="script"/><meta charset="utf-8" class="next-head"/><title class="next-head">tgrecojs - Post</title><style id="__jsx-style-1878097593">nav[data-jsx="1878097593"]{background-color:rgb(86,156,183);font-family:'Lato',san-serif;overflow:hidden;width:100%;position:fixed;top:0;padding:1em;border-bottom:1px solid #49768c}a[data-jsx="1878097593"]{color:#fff;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}a[data-jsx="1878097593"]:hover{-webkit-transform:scale(1.2);-ms-transform:scale(1.2);transform:scale(1.2)}a[data-jsx="1878097593"]:visited{color:#fff}.navWide[data-jsx="1878097593"]{display:none;margin:0 auto}.navWide[data-jsx="1878097593"] .wideDiv[data-jsx="1878097593"]{-webkit-text-align:center;text-align:center}.navWide[data-jsx="1878097593"] .wideDiv[data-jsx="1878097593"] a[data-jsx="1878097593"]{-webkit-text-decoration:none;text-decoration:none;display:inline-block;padding:0 2em}.navNarrow[data-jsx="1878097593"] i[data-jsx="1878097593"]{float:left;cursor:pointer;color:#fff}.navNarrow[data-jsx="1878097593"] .narrowLinks[data-jsx="1878097593"]{display:none}.navNarrow[data-jsx="1878097593"] .narrowLinks[data-jsx="1878097593"] a[data-jsx="1878097593"]{-webkit-text-decoration:none;text-decoration:none;display:block;float:left;clear:left;padding:0.5em 0}.wideDiv[data-jsx="1878097593"]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around}@media (min-width:480px){.navWide[data-jsx="1878097593"]{display:block}.navNarrow[data-jsx="1878097593"]{display:none}}</style><style type="text/css" data-styled-components="kiIIQu ISEiW DNLNF hpMUcG cgOcsW bQsEQs lgRfLJ" data-styled-components-is-local="true">/* sc-component-id: Card__Anchor-s5yzqv-0 */

.bQsEQs{color:#fff;font-family:'Lato';}
/* sc-component-id: Card__PostCard-s5yzqv-1 */

.hpMUcG{background:rgb(86,156,183);padding:1em;color:#fff;font-family:'Lato';border:1px solid white;border-radius:10px;margin:1.5em;text-align:center;line-height:1.5;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.hpMUcG p{width:80%;text-align:left;}@media (max-width:600px){.hpMUcG p{display:none;}}
/* sc-component-id: Card__Btn-s5yzqv-2 */

.cgOcsW{height:50px;width:50%;font-size:1.15em;border:2px solid #fff;border-radius:5px;-webkit-transition:all .3s ease-in;transition:all .3s ease-in;background:rgb(147,205,227);margin:15px;}.cgOcsW:hover{background:#49768c;}
/* sc-component-id: Footer__Footer-bubpqg-0 */

.DNLNF{background-color:rgb(86,156,183);font-family:'Lato';color:hsl(210, 25%, 100%);}.DNLNF a,.DNLNF a:visited{color:hsl(210, 25%, 100%);}
/* sc-component-id: Header__Logo-lr9vzt-0 */

.ISEiW{max-width:300px;margin-top:3em;}
/* sc-component-id: centered-s1cjkchs-0 */

.kiIIQu .content{background:#49768c;-webkit-flex:1;-ms-flex:1;flex:1;height:100%;padding:3px;}.kiIIQu a{text-decoration:none;}.kiIIQu .header{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;text-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:'Lato',san-serif;margin-top:1.25em;}.kiIIQu main{font-family:'Lato',san-serif;max-width:500px;font-size:16px;margin:30px auto;}@media (min-width:700px){.kiIIQu main{max-width:100%;}}.kiIIQu .home-link{margin-left:30px;}.kiIIQu .footer{padding:30px;text-align:center;}.kiIIQu .post{margin:15px 30px 30px;line-height:1.4em;padding:1em;background:#fff;border:1px solid black;}.kiIIQu .post h1{display:inline-block;margin:0;}@media (max-width:672px){.kiIIQu .post{margin:5px;}}.kiIIQu .post .post--body{margin:15px 0;}.kiIIQu .post--info{margin:15px 0;}.kiIIQu .post--info span:not(:first-child){border-left:1px solid #000;padding-left:5px;}.kiIIQu .post--info span:first-child{padding-right:5px;}
/* sc-component-id: Post__Article-s14mjryp-0 */

.lgRfLJ .twitter-icon{max-width:50px;}.lgRfLJ .twitter-link{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.lgRfLJ .post-btn-row{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.lgRfLJ button{width:25%;height:40px;background:#49768c;}.lgRfLJ button a{color:white;}@media (max-width:600px){.lgRfLJ button{width:50%;margin-bottom:16px;}.lgRfLJ .post-btn-row{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}.lgRfLJ img{max-width:100%;}.lgRfLJ *{font-family:'Lato',sans-serif;}.lgRfLJ h1{padding:.5em;line-height:1.3em;}.lgRfLJ .table-wrapper{overflow-x:auto;}.lgRfLJ table{border-collapse:collapse;}.lgRfLJ table th{background-color:#0366D6;color:#FAFBFC;}.lgRfLJ table,.lgRfLJ th,.lgRfLJ td{border:1px solid #3F4448;}.lgRfLJ th,.lgRfLJ td{padding:10px;}.lgRfLJ blockquote{margin:1.8rem 20px;padding:1rem 10px;}.lgRfLJ blockquote p{font-size:1.4rem;margin:0;display:inline;}.lgRfLJ blockquote p:before{font-size:5rem;font-family:Georgia,serif;color:hsl(206.70000000000005, 6.7%, 66.2%);content:open-quote;line-height:0.3rem;margin-right:0.8rem;vertical-align:-0.4em;}.lgRfLJ blockquote p:after{content:close-quote;visibility:hidden;}
</style><style type="text/css">
  html {
    line-height: 1.15;
    -ms-text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;
  }

  body {
    margin: 0;
  }

  article,
  aside,
  footer,
  header,
  nav,
  section {
    display: block;
  }

  h1 {
    font-size: 2em;
    margin: 0.67em 0;
  }

  figcaption,
  figure,
  main {
    display: block;
  }

  figure {
    margin: 1em 40px;
  }

  hr {
    box-sizing: content-box;
    height: 0;
    overflow: visible;
  }

  pre {
    font-family: monospace, monospace;
    font-size: 1em;
  }

  a {
    background-color: transparent;
    -webkit-text-decoration-skip: objects;
  }

  abbr[title] {
    border-bottom: none;
    text-decoration: underline;
    text-decoration: underline dotted;
  }

  b,
  strong {
    font-weight: inherit;
  }

  b,
  strong {
    font-weight: bolder;
  }

  code,
  kbd,
  samp {
    font-family: monospace, monospace;
    font-size: 1em;
  }

  dfn {
    font-style: italic;
  }

  mark {
    background-color: #ff0;
    color: #000;
  }

  small {
    font-size: 80%;
  }

  sub,
  sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
  }

  sub {
    bottom: -0.25em;
  }

  sup {
    top: -0.5em;
  }

  audio,
  video {
    display: inline-block;
  }

  audio:not([controls]) {
    display: none;
    height: 0;
  }

  img {
    border-style: none;
  }

  svg:not(:root) {
    overflow: hidden;
  }

  button,
  input,
  optgroup,
  select,
  textarea {
    font-family: sans-serif;
    font-size: 100%;
    line-height: 1.15;
    margin: 0;
  }

  button,
  input {
    overflow: visible;
  }

  button,
  select {
    text-transform: none;
  }

  button,
  html [type=&quot;button&quot;],
  [type=&quot;reset&quot;],
  [type=&quot;submit&quot;] {
    -webkit-appearance: button;
  }

  button::-moz-focus-inner,
  [type=&quot;button&quot;]::-moz-focus-inner,
  [type=&quot;reset&quot;]::-moz-focus-inner,
  [type=&quot;submit&quot;]::-moz-focus-inner {
    border-style: none;
    padding: 0;
  }

  button:-moz-focusring,
  [type=&quot;button&quot;]:-moz-focusring,
  [type=&quot;reset&quot;]:-moz-focusring,
  [type=&quot;submit&quot;]:-moz-focusring {
    outline: 1px dotted ButtonText;
  }

  fieldset {
    padding: 0.35em 0.75em 0.625em;
  }

  legend {
    box-sizing: border-box;
    color: inherit;
    display: table;
    max-width: 100%;
    padding: 0;
    white-space: normal;
  }

  progress {
    display: inline-block;
    vertical-align: baseline;
  }

  textarea {
    overflow: auto;
  }

  [type=&quot;checkbox&quot;],
  [type=&quot;radio&quot;] {
    box-sizing: border-box;
    padding: 0;
  }

  [type=&quot;number&quot;]::-webkit-inner-spin-button,
  [type=&quot;number&quot;]::-webkit-outer-spin-button {
    height: auto;
  }

  [type=&quot;search&quot;] {
    -webkit-appearance: textfield;
    outline-offset: -2px;
  }

  [type=&quot;search&quot;]::-webkit-search-cancel-button,
  [type=&quot;search&quot;]::-webkit-search-decoration {
    -webkit-appearance: none;
  }

  ::-webkit-file-upload-button {
    -webkit-appearance: button;
    font: inherit;
  }

  details,
  menu {
    display: block;
  }

  summary {
    display: list-item;
  }

  canvas {
    display: inline-block;
  }

  template {
    display: none;
  }

  [hidden] {
    display: none;
  }
</style><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="manifest" href="./static/manifest.json"/><meta name="theme-color" content="#56a5b7"/><link rel="shortcut icon" type="image/png" href="/static/tg-logo.png"/></head><body><div class="root"><div><div id="__next"><div data-reactroot="" data-reactid="1" data-react-checksum="257391697"><div class="centered-s1cjkchs-0 kiIIQu" data-reactid="2"><!-- react-empty: 3 --><nav data-jsx="1878097593" data-reactid="4"><!-- react-empty: 5 --><div class="navWide" data-jsx="1878097593" data-reactid="6"><div class="wideDiv" data-jsx="1878097593" data-reactid="7"><a data-jsx="1878097593" href="/" data-reactid="8">Blogroll</a><a data-jsx="1878097593" href="/contact/" data-reactid="9">Contact Me</a><a data-jsx="1878097593" data-reactid="10"><iframe src="https://platform.twitter.com/widgets/follow_button.html?screen_name=tgrecojs&amp;show_screen_name=false&amp;show_count=false&amp;size=l" title="Follow TwitterDev on Twitter" width="80" height="30" style="border:0px;overflow:hidden;" data-jsx="1878097593" data-reactid="11"></iframe></a></div></div><div class="navNarrow" data-jsx="1878097593" data-reactid="12"><i class="fa fa-bars fa-2x" data-jsx="1878097593" data-reactid="13"></i><div class="narrowLinks" data-jsx="1878097593" data-reactid="14"><a data-jsx="1878097593" href="/contact/" data-reactid="15">Contact Me</a><a data-jsx="1878097593" href="/" data-reactid="16">Home</a><a data-jsx="1878097593" data-reactid="17"><iframe src="https://platform.twitter.com/widgets/follow_button.html?screen_name=TwitterDev&amp;show_screen_name=false&amp;show_count=false&amp;size=l" title="Follow tgrecojs on Twitter" width="80" height="30" style="border:0px;overflow:hidden;" data-jsx="1878097593" data-reactid="18"></iframe></a><a data-jsx="1878097593" data-reactid="19">Close Menu</a></div></div></nav><div class="header" data-reactid="20"><img class="Header__Logo-lr9vzt-0 ISEiW" src="/static/tg-logo.png" data-reactid="21"/><h3 data-reactid="22">Providing the latest in web application programming.</h3></div><div class="content" data-reactid="23"><main class="main" data-reactid="24"><div data-reactid="25"><article class="post Post__Article-s14mjryp-0 lgRfLJ" itemscope="" itemtype="http://schema.org/BlogPosting" data-reactid="26"><header data-reactid="27"><h1 itemprop="headline" class="post--title" data-reactid="28">Unit Testing in Tape Vs. Jest</h1><div data-reactid="29"><small class="post--tags" data-reactid="30"><span data-reactid="31">Tags: </span><span itemprop="keywords" class="post--tag" data-reactid="32"><a href="/tag/reactjs/" data-reactid="33">ReactJS</a><!-- react-text: 34 -->, <!-- /react-text --></span><span itemprop="keywords" class="post--tag" data-reactid="35"><a href="/tag/testing/" data-reactid="36">Testing</a><!-- react-text: 37 --><!-- /react-text --></span></small></div><div class="post--info" data-reactid="38"><span data-reactid="39"><time itemprop="datePublished" datetime="2017-9-05 15:00 PDT" data-reactid="40">about 21 hours ago</time></span></div></header><div class="post--body" data-reactid="41"><h2 id="getting-acquainted-with-jest">Getting Acquainted with Jest</h2>
<h4 id="intro">Intro</h4>
<p>Like any developer, my preference of tools that was built pretty much entirely on past experiences. This means that if i’m not using the tool and it’s known to be an aid to developers then there’s a good chance i’m uninformed on the topic. This was particularly true with Jest, which has become the most widely used library for testing ReactJS applications, so I thought it would be wise to explore the topic a little bit in a blog post. In this post, I want to share my feedback about recently using Jest while contributing to the next-static project.  </p>
<p>I recently ended up pivoting from a dynamic web application to a static site for tgrecojs.com. next-static and the solution has worked A1 so I ended up contributing to the project. The first order of business was to write some tests for this project so I dove right in. Throughout 2017 I received a ton of experience writing unit tests for ReactJS apps but I always used tape so it was no shock that I initially gravitated to my normal dev environment for writing tests.</p>
<h4 id="reading-the-unit-test">Reading the Unit Test</h4>
<p>A few minutes after getting my environment set up I had the boilerplate for my first <code>test.js</code> file all ready to go. </p>
<p>Below, we can see the code submitted in <a href="https://github.com/infiniteluke/next-static/pull/9/commits/006dbe18a2b80f25f9b4d95c090e940da09f09f7">initial pull request</a>.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// imports….</span>
<span class="token comment" spellcheck="true">// set up for test scope</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'&lt;Post />'</span><span class="token punctuation">,</span> nest <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  nest<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'given no props'</span><span class="token punctuation">,</span> assert <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token template-string"><span class="token string">`should render a post`</span></span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">makeProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> re <span class="token operator">=</span> <span class="token function">RegExp</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> el <span class="token operator">=</span> <span class="token operator">&lt;</span>Post <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> $ <span class="token operator">=</span> dom<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token function">render</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> output <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.post'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> actual <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>output<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> expected <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    assert<span class="token punctuation">.</span><span class="token function">same</span><span class="token punctuation">(</span>actual<span class="token punctuation">,</span> expected<span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    assert<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Once ran, this log for this test would look like the image below.</p>
<p><img src="https://s26.postimg.org/7glcfzwjd/TAP-_OUTPUT.png" alt="tap"></p>
<p>Isn’t that pretty? I’m a sucker for some good TAP which tape produces little did I know that I was taking it for granted but more on that in a moment. At this point, I finally had something that I could confidently push over to the next-static repo. About a day later, I received this remark from the project owner.</p>
<p><img src="https://s26.postimg.org/a0gza3k3d/Screen_Shot_2017-09-05_at_1.03.05_AM.png" alt="next static issue"></p>
<p>But of course! Why was I using this stone-age technology when I could just plug in Jest! All kidding aside I wasn’t surprised by this. I know how crazy important of a tool Jest has become to so many developers and I was just excited to dive into the framework.</p>
<h3 id="becoming-one-with-jest">Becoming one with Jest</h3>
<p>I knew that migrated this super basic test wasn’t going to be hard. I just needed to know how my test was to be set up.</p>
<p>Initially, I use the <code>test</code> function imported from the tape library. Once my test was complete, it was then loaded in an <code>index.test.js</code> file which I had set up at the main test file. One of Jest’s marquee behaviors is it’s ability to magically runs tests as long as they are either:</p>
<ul>
<li>in <em>.test.js or </em>.spec.js</li>
<li>they are in a tests folder.</li>
</ul>
<p>At the time of writing my test, I wasn’t even aware of this criteria however my code was inside <code>test.js</code> file so everything worked out great. Additionally, I could completely eliminate that main index.test.js file as the <code>jest</code> command would navigate to the tests on its own. Once inside these tests, Jest will look for specific global variables that it provides users with for writing tests. In my case, I had to swap out <code>test</code> for Jest&#39;s <code>describe</code> function which will signify that a test suite has been created.</p>
<blockquote>
<p>Globals<br>In your test files, Jest puts each of these methods and objects into the global environment. You don&#39;t have to require or import anything to use them.</p>
<ul>
<li><a href="https://facebook.github.io/jest/docs/en/api.html">Jest Docs</a></li>
</ul>
</blockquote>
<p>These globals are what allow Jest to magically run our tests without importing any code. I don’t want to be over critical of an extremely well known tool like Jest however I became very conscious of polluting my global scope throughout the last year. Yes, even in regards to testing. Over time, I became super comfortable with importing tape directly. It only took a write an import statement (I could add to a VS code snippet if I really needed to) and I feel comfort in knowing my test code is completely self-contained and free from outside bugs. Now, I don’t want to make it seem like i’m nitpicking here. This is merely my feedback on the library. That being said, I think that this no set-up configuration could allows testing to get off the ground as soon as possible.</p>
<p>Sure enough, I ran my tests and saw that Jest was picking up on my code. I didn’t know the .test or .spec criteria at this time but my tests already fell in line with the criteria necessary. I modified my code to fit Jest’s syntax, and my unit test looked like the following.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'&lt;Post /> with no args'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should render a post with default args'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">makeProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> re <span class="token operator">=</span> <span class="token function">RegExp</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> el <span class="token operator">=</span> <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> $ <span class="token operator">=</span> <span class="token function">loadComponent</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> output <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.post'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> actual <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>output<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> expected <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

<span class="token function">expect</span><span class="token punctuation">(</span>actual<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>`</code></pre><p>As you can see, my test no longer has the <code>assert</code> call back that was used with Tape. Instead, we see Jest’s <code>expect</code> function to create test assertions. Specifically, we see <code>expect</code> asserting that the <code>actual</code> value is equal to the <code>expected</code> value using <code>toEqual</code>. As you can see, migrating this test really didn’t take much and it felt good know that I could have certainly migrated any test’s I’ve written to use Jest without any sort of conflict. Same concepts just different libraries. I love sinking my teeth into knew technologies (especially if I can undertand them from the jump) so it felt good to have my tests now passing with Jest. </p>
<h4 id="you-had-one-job">You had one job</h4>
<p>A day after pushing my newly committed Jest’ test to the next-static repo, I was informed that I failed to fully understand what was being asked of me. I produced a unit test but I really needed to create a snapshot test. Great! Now that I correctly identified the objective, I just needed to find out what exactly a snapshot test was.</p>
<h4 id="enter-snapshot-testing">Enter Snapshot Testing</h4>
<p>As it’s name suggests, a snapshot test will take a <code>snapshot</code> of a component each time a test is run. If there is an existing snapshot, Jest will compare the two to make sure that nothing in our UI has changed unexpectedly. This is meant to provide developers with instant feedback of their UI. Whereas unit test assertions are meant to test a specific behavior, snapshot tests allow us to monitor trivial modifications in our UI. </p>
<p>To accomplish this, we use the <code>react-test-renderer</code> library’s <code>.toMatchSnapshot()</code> method. Once this is set up, Jest will compare the snapshot of our component to any previous snapshot’s and test their contents are the same. </p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Snapshot::&lt;Post />s'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should render the contents of the component.'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">makeProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> el <span class="token operator">=</span> <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> tree <span class="token operator">=</span> renderer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">expect</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Below is the exact snapshot Jest created for the <code>&lt;Post/&gt;</code> component. I’m not going to explain each line but you should be able to easily reason about what the UI should render. </p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// Jest Snapshot v1, https://goo.gl/fbAQLP</span>

exports<span class="token punctuation">[</span><span class="token template-string"><span class="token string">`Snapshot::&lt;Post />s should render the contents of the component. 1`</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token template-string"><span class="token string">`
&lt;article
  className="post Post__Article-s1eculme-0 fQItYZ"
  itemScope={true}
  itemType="http://schema.org/BlogPosting";
>
  &lt;header>
    &lt;a
      href="/post/test-post"
      onClick={[Function]}
    >
      &lt;h1
        className="post--title"
        itemProp="headline"
      >
        Hello
      &lt;/h1>
    &lt;/a>
    &lt;footer
      className="post--info"
    >
      &lt;span>
        &lt;time
          dateTime="7/22/2017"
          itemProp="datePublished"
        >
          about 1 month ago
        &lt;/time>
      &lt;/span>
      &lt;span
        itemProp="author"
      >
        User
      &lt;/span>
    &lt;/footer>
  &lt;/header>
  &lt;div
    className="post--body"
    dangerouslySetInnerHTML={
      Object {
        "__html": "&lt;p>lorem ipsum is the name making tests is this game&lt;/p>
      ",
      }
    }
  />
  &lt;footer>
    &lt;small
      className="post--tags"
    >
      &lt;span>
        Filed under: 
      &lt;/span>
      &lt;span
        className="post--tag"
        itemProp="keywords"
      >
        &lt;a
          href="/tag/javascript"
          onClick={[Function]}
        >
          javascript
        &lt;/a>
        , 
      &lt;/span>
      &lt;span
        className="post--tag"
        itemProp="keywords"
      >
        &lt;a
          href="/tag/angular"
          onClick={[Function]}
        >
          angular
        &lt;/a>

      &lt;/span>
    &lt;/small>
  &lt;/footer>
&lt;/article>
`</span></span><span class="token punctuation">;</span></code></pre><p>As you can see, Jest has created a readable representation of our UI. From this point forward, any future implementations of <code>&lt;Post/&gt;</code> will be tested against this snapshot. To get a better understanding of this, let’s see what happens when we remove the <code>&lt;footer&gt;</code> from our <code>Post</code> component and run our snapshot test. </p>
<p><img src="https://s26.postimg.org/o2ybbc03d/Screen_Shot_2017-09-04_at_5.01.48_PM.png" alt="jest snapshot ss"></p>
<p>Taking a look at this image, we see that Jest is expecting the <code>&lt;footer&gt;</code> div and it can’t find it inside our component. As a result of this, we see the<code>-</code> sign thus signifying that the code block has been removed from the file.   If I was instructed to remove this footer, I would acknowledge this change and run <code>jest -u</code> to update my snapshot but I wasn’t. Instead, I was creating the initial snapshot for this component and therefore I didn’t have to worry about prior snapshots. The fact that I had created the starting point for futures tests was good enough.</p>
<p><img src="https://s26.postimg.org/xdf0sm06v/Screen_Shot_2017-09-04_at_5.06.21_PM.png" alt="jest update snapshot ss"></p>
<p>At this point I was further seeing seeing the benefits that Jest bring to a project but I haven’t been completely sold on it being the end all be all of testing solutions. It’s meant to run super quickly but I found that my tests actually ran a bit quicker with tape which would make sense due to how lightweight tape is. </p>
<p>Additionally, tape allows me to use TAP. Call me old-fashioned but TAP has been around since the 1980’s. That’s older than me and technologies that have lasted this long are usually etched in stone for good reason. I haven’t personally tried to integrate a custom TAP reporter with Jest but from what i’ve gathered it’s fairly difficult task. Is this the end of the world? No. Not at all but it’s worth noting. On the other hand, when the <code>—watch</code> flag is used, Jest offers a pretty cool interface that makes running specific tests a breeze. <code>—watch</code> keeps Jest running after creating snapshot tests and offer us the ability to update our previous snapshots by just pressing <code>u</code>.</p>
<h4 id="final-words">Final Words</h4>
<p>There’s no denying that Jest makes it easy to get begin testing code. In fact, easy is putting it lightly. As I just mentioned, it was so easy that I was initially a bit confused as to how this was supposed to work but the point is that it did indeed work. Aside from the globabl varables and not being able to easily print test results in TAP and the global variables, I have no qualms about the effectiveness of Jest. On the contrary, I am really excited to see what else Jest has to offer as I know that this isn&#39;t the last I will see of it! Hopefully you too are </p>
</div><div class="post-btn-row" data-reactid="42"><button data-reactid="43"><a href="/" data-reactid="44">Back to home</a></button><a class="twitter-link" href="http://twitter.com/share/?text=Read Unit Testing in Tape Vs. Jest via @tgrecojs #javascript &amp;url=https://tgrecojs.com/posts/tape-jest-testing" data-reactid="45"><!-- react-text: 46 -->Share Post<!-- /react-text --><img class="twitter-icon" alt="Share on Twitter" src="/static/twitter-icon.png" data-reactid="47"/></a></div></article></div></main></div><div class="footer Footer__Footer-bubpqg-0 DNLNF" data-reactid="48"><small class="footer--madeWith" data-reactid="49"><!-- react-text: 50 -->Made with<!-- /react-text --><!-- react-text: 51 --> <!-- /react-text --><span role="img" aria-label="love" data-reactid="52">❤️</span><!-- react-text: 53 --> <!-- /react-text --><!-- react-text: 54 -->and<!-- /react-text --><!-- react-text: 55 --> <!-- /react-text --><a href="https://github.com/infiniteluke/next-static" data-reactid="56"><!-- react-text: 57 -->Next Static<!-- /react-text --><!-- react-text: 58 --> <!-- /react-text --><span role="img" aria-label="with extra sparkles" data-reactid="59">✨</span></a></small></div></div></div></div><div id="__next-error"></div></div></div><div><script>
          __NEXT_DATA__ = {"props":{},"pathname":"/post","query":{"post":"tape-jest-testing"},"buildId":"ce5d4a60-9e10-480d-82bb-ce009bc3d0c1","buildStats":{"app.js":{"hash":"f26e4a744a3bf392118da3c0b731b76c"}},"assetPrefix":"","nextExport":true,"err":null,"chunks":[]}
          module={}
          __NEXT_LOADED_PAGES__ = []
          __NEXT_LOADED_CHUNKS__ = []

          __NEXT_REGISTER_PAGE = function (route, fn) {
            __NEXT_LOADED_PAGES__.push({ route: route, fn: fn })
          }

          __NEXT_REGISTER_CHUNK = function (chunkName, fn) {
            __NEXT_LOADED_CHUNKS__.push({ chunkName: chunkName, fn: fn })
          }
        </script><script async="" id="__NEXT_PAGE__/post" type="text/javascript" src="/_next/ce5d4a60-9e10-480d-82bb-ce009bc3d0c1/page/post/index.js"></script><script async="" id="__NEXT_PAGE__/_error" type="text/javascript" src="/_next/ce5d4a60-9e10-480d-82bb-ce009bc3d0c1/page/_error/index.js"></script><div></div><script type="text/javascript" src="/_next/f26e4a744a3bf392118da3c0b731b76c/app.js" async=""></script></div><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/themes/prism.min.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato"/></body></html>